{"ast":null,"code":"class FiltersLibrary {\n  constructor(albums, filterDict) {\n    this.albums = albums;\n    this.filterDict = filterDict;\n    this.match = {\n      artist: [],\n      title: [],\n      genres: [],\n      band_name: [],\n      label_origin: [],\n      genres_include: [],\n      genres_exclude: []\n    };\n  }\n\n  // Return true if value match all available parameters\n  crossCheck(searchValue) {\n    for (let key in this.match) {\n      if (this.match[key].length > 0) {\n        if (!this.match[key].includes(searchValue)) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  // Filter by given value in specified fields\n  byKey(dictParam, fieldsToSearch) {\n    var searchVal = this.filterDict[dictParam].toLowerCase();\n    for (let a of this.albums) {\n      fieldsToSearch.forEach(dictParam => {\n        if (typeof a[dictParam] !== 'undefined') {\n          if (a[dictParam].toLowerCase().includes(searchVal)) {\n            this.match[dictParam].push(a);\n          }\n        }\n      });\n    }\n  }\n  byGenres(dictParam) {\n    var searchArr = this.filterDict[dictParam];\n    for (let a of this.albums) {\n      var albumGenres = a.genres.replace(/\\]|\\[|\\'/g, '').split(', ');\n      searchArr.forEach(g => {\n        if (albumGenres.includes(g)) {\n          this.match[dictParam].push(a);\n        }\n      });\n    }\n  }\n\n  // Filter by given value in specified fields\n  byKeyNagetive(dictParam, fieldsToSearch) {\n    var searchVal = this.filterDict[dictParam].toLowerCase();\n    for (let a of this.albums) {\n      fieldsToSearch.forEach(dictParam => {\n        if (typeof a[dictParam] !== 'undefined') {\n          if (!a[dictParam].toLowerCase().includes(searchVal)) {\n            this.match[dictParam].push(a);\n          }\n        }\n      });\n    }\n  }\n  byDate(dictParam) {\n    var searchVal = this.filterDict[dictParam];\n    for (let a of this.albums) {\n      if (new Date(a.published) > new Date(searchVal) && dictParam === 'byDateStart') {\n        this.match[dictParam].push(a);\n      } else if (new Date(a.published) < new Date(searchVal) && dictParam === 'byDateEnd') {\n        this.match[dictParam].push(a);\n      }\n    }\n  }\n  manage() {\n    for (let key in this.filterDict) {\n      var keySearch = ['artist', 'title', 'genres', 'band_name', 'label_origin'];\n      if (this.filterDict[key].length > 0) {\n        switch (key) {\n          case 'artist':\n          case 'title':\n          case 'genres':\n          case 'band_name':\n          case 'label_origin':\n            this.byKey(key, [key]);\n            break;\n          case 'byKey':\n            this.byKey(key, keySearch);\n            break;\n          case 'byDateStart':\n          case 'byDateEnd':\n            this.byDate(key);\n            break;\n          case 'genres_include':\n            this.byKey(key);\n            break;\n          case 'genres_exclude':\n            this.byKey(key);\n            break;\n        }\n      }\n    }\n    let activeSearch = false;\n    for (let filter in this.filterDict) {\n      if (this.filterDict[filter].length > 0) {\n        activeSearch = true;\n        break;\n      }\n    }\n    if (activeSearch) {\n      let toReturn = [];\n      for (let a of this.albums) {\n        if (this.crossCheck(a)) {\n          toReturn.push(a);\n        }\n      }\n      if (toReturn.length === this.albums.length) {\n        toReturn = [];\n      }\n      return toReturn;\n    } else {\n      return this.albums;\n    }\n  }\n}\nexport default FiltersLibrary;","map":{"version":3,"names":["FiltersLibrary","constructor","albums","filterDict","match","artist","title","genres","band_name","label_origin","genres_include","genres_exclude","crossCheck","searchValue","key","length","includes","byKey","dictParam","fieldsToSearch","searchVal","toLowerCase","a","forEach","push","byGenres","searchArr","albumGenres","replace","split","g","byKeyNagetive","byDate","Date","published","manage","keySearch","activeSearch","filter","toReturn"],"sources":["/home/capitalturtle/react/client/src/components/Filters/FiltersLibrary.js"],"sourcesContent":["class FiltersLibrary {\n    constructor(albums, filterDict) {\n        this.albums = albums\n        this.filterDict = filterDict\n        this.match = {\n            artist: [],\n            title: [],\n            genres: [],\n            band_name: [],\n            label_origin: [],\n            genres_include: [],\n            genres_exclude: []\n        }\n    }\n\n    // Return true if value match all available parameters\n    crossCheck(searchValue) {\n        for (let key in this.match) {\n            if (this.match[key].length > 0) {\n                if (!this.match[key].includes(searchValue)) {\n                    return false\n                }\n            } \n        }\n        return true\n    }\n\n    // Filter by given value in specified fields\n    byKey(dictParam, fieldsToSearch) {\n        var searchVal = this.filterDict[dictParam].toLowerCase()\n        for (let a of this.albums) {\n            fieldsToSearch.forEach((dictParam) => {\n                if (typeof a[dictParam] !== 'undefined') {\n                    if (a[dictParam].toLowerCase().includes(searchVal)) {\n                        this.match[dictParam].push(a)\n                    }\n                }\n            })\n        }\n    }\n\n    byGenres(dictParam) {\n        var searchArr = this.filterDict[dictParam]\n        for (let a of this.albums) {\n            var albumGenres = a.genres.replace(/\\]|\\[|\\'/g, '').split(', ')\n            searchArr.forEach((g) => {\n                if (albumGenres.includes(g)) {\n                    this.match[dictParam].push(a)\n                }\n            })\n        }\n    }\n\n    // Filter by given value in specified fields\n    byKeyNagetive(dictParam, fieldsToSearch) {\n        var searchVal = this.filterDict[dictParam].toLowerCase()\n        for (let a of this.albums) {\n            fieldsToSearch.forEach((dictParam) => {\n                if (typeof a[dictParam] !== 'undefined') {\n                    if (!a[dictParam].toLowerCase().includes(searchVal)) {\n                        this.match[dictParam].push(a)\n                    }\n                }\n            })\n        }\n    }\n\n    byDate(dictParam) {\n        var searchVal = this.filterDict[dictParam]\n        for (let a of this.albums) {\n            if ((new Date(a.published) > new Date(searchVal) && (dictParam === 'byDateStart'))) {\n                this.match[dictParam].push(a)\n            } else if ((new Date(a.published) < new Date(searchVal) && (dictParam === 'byDateEnd'))) {\n                this.match[dictParam].push(a)\n            }\n        }\n    }\n\n    manage() {\n        for (let key in this.filterDict) {\n            var keySearch = ['artist', 'title', 'genres', 'band_name', 'label_origin']\n            if (this.filterDict[key].length > 0) {\n                switch(key) {\n                    case 'artist':\n                    case 'title':\n                    case 'genres':\n                    case 'band_name':\n                    case 'label_origin':\n                        this.byKey(key, [key])\n                        break\n                    case 'byKey':\n                        this.byKey(key, keySearch)\n                        break\n                    case 'byDateStart':\n                    case 'byDateEnd':\n                        this.byDate(key)\n                        break\n                    case 'genres_include':\n                        this.byKey(key)\n                        break\n                    case 'genres_exclude':\n                        this.byKey(key)\n                        break\n                }\n            }\n        }\n\n        let activeSearch = false\n        for (let filter in this.filterDict) {\n            if (this.filterDict[filter].length > 0) {\n                activeSearch = true\n                break\n            }\n        }\n\n        if (activeSearch) {\n            let toReturn = []\n            for (let a of this.albums) {\n                if (this.crossCheck(a)) {\n                    toReturn.push(a)\n                }\n            }\n    \n            if (toReturn.length === this.albums.length) {\n                toReturn = []\n            }\n            return toReturn\n        } else {\n            return this.albums\n        }\n\n    }\n}\n\nexport default FiltersLibrary"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}